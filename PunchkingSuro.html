<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라라 펀치킹 수로 계산기</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var tooltips = document.querySelectorAll('.tooltip');
            tooltips.forEach(function(tooltip) {
                tooltip.addEventListener('mouseenter', function() {
                    this.querySelector('.tooltip-text').style.display = 'block';
                });
                tooltip.addEventListener('mouseleave', function() {
                    this.querySelector('.tooltip-text').style.display = 'none';
                });
            });
        });
    </script>
</head>
<body>
  <div class="flex flex-col items-center w-full min-h-screen p-4 bg-gray-100">
    <h1 class="mb-8 text-3xl font-bold text-green-600 text-center">라라 펀치킹 수로 계산기</h1>
    <div class="flex flex-col md:flex-row w-full max-w-2xl">
      <div class="w-full md:w-1/2 md:mr-4 mb-4 md:mb-0">
        <div class="bg-white rounded-lg shadow-md p-6 h-full flex flex-col justify-center">
          <div class="image-container h-96 h-full">
            <img src="펀치킹 환산.png" alt="펀치킹 환산" class="object-contain w-full h-auto md:h-full">
          </div>
          <div class="image-container h-96 h-full">
            <img src="설명서.png" alt="수로 환산" class="object-contain w-full h-auto md:h-full">
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2 flex flex-col">
        <div class="bg-white rounded-lg shadow-md p-6 flex-grow">
          <div class="relative">
            <div class="absolute top-2 right-2 w-5 h-5 bg-white rounded-full flex items-center justify-center text-gray-500 cursor-pointer hover:text-gray-700 border border-gray-500 tooltip">
              <span class="text-sm">?</span>
              <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap tooltip-text" style="display: none;">펀치킹용 계산기에는 일반 환산을 입력해야합니다. ex) 4억1127만5861 > 411275861으로 입력</div>
            </div>
            <div class="text-center">
              <h2 class="text-xl font-semibold">펀치킹용 계산기</h2>
              <p class="mt-2 text-sm text-gray-600">계산기 제작자 : 엘리시움 아기양라라쟝</p>
            </div>
            <div class="mt-4 space-y-4">
              <input type="number" id="hexa" placeholder="일반 환산 입력" class="border border-gray-300 rounded-md px-4 py-2 text-center w-full">
              <button onclick="calculate()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">계산하기</button>
              <div class="flex flex-col items-center space-y-2">
                <p id="damage"></p>
                <p id="score"></p>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 mt-4 flex-grow">
          <div class="relative">
            <div class="absolute top-2 right-2 w-5 h-5 bg-white rounded-full flex items-center justify-center text-gray-500 cursor-pointer hover:text-gray-700 border border-gray-500 tooltip">
              <span class="text-sm">?</span>
              <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap tooltip-text" style="display: none;">수로용 계산기에는 직업 입력을 통해 노블을 모두 0으로 만든 후에 나온 일반 환산을 입력</div>
            </div>
            <div class="text-center">
              <h2 class="text-xl font-semibold">수로용 계산기</h2>
              <p class="mt-2 text-sm text-gray-600">펀치킹, 수로 표본 제공 : 스카니아 엥새</p>
            </div>
            <div class="mt-4 space-y-4">
              <input type="number" id="hexa2" placeholder="일반 환산 입력" class="border border-gray-300 rounded-md px-4 py-2 text-center w-full">
              <button onclick="calculate2()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">계산하기</button>
              <div class="flex flex-col items-center space-y-2">
                <p id="damage2"></p>
                <p id="score2"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 스킬 레벨 입력 부분 추가 -->
    <div class="bg-white rounded-lg shadow-md p-6 mt-4 w-full max-w-2xl">
      <h2 class="text-xl font-semibold text-center">스킬 레벨 입력</h2>
      <div class="mt-4">
        <div class="grid grid-cols-2 md:grid-cols-7 gap-4">
          <div class="flex flex-col items-center">
            <label for="MasteryCore1" class="text-center">정뿌</label>
            <input type="number" id="MasteryCore1" placeholder="0~30" min="0" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="MasteryCore2" class="text-center">분출</label>
            <input type="number" id="MasteryCore2" placeholder="1~30" min="1" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="OriginCore" class="text-center">꽃누리</label>
            <input type="number" id="OriginCore" placeholder="1~30" min="1" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="FifthCore1" class="text-center">해강산</label>
            <input type="number" id="FifthCore1" placeholder="0~30" min="0" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="FifthCore2" class="text-center">굽이굽이</label>
            <input type="number" id="FifthCore2" placeholder="0~30" min="0" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="FifthCore3" class="text-center">큰기지개</label>
            <input type="number" id="FifthCore3" placeholder="0~30" min="0" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
          <div class="flex flex-col items-center">
            <label for="FifthCore4" class="text-center">용솟음</label>
            <input type="number" id="FifthCore4" placeholder="0~30" min="0" max="30" class="border border-gray-300 rounded-md px-2 py-1 text-center w-20" style="text-align: center;">
          </div>
        </div>
      </div>
    </div>
  </div>
<script>
function HexaCalculate() {
    // 스킬 레벨 입력에서 값 가져오기 및 숫자로 변환
    let MasteryCore1 = parseInt(document.getElementById("MasteryCore1").value);
    let MasteryCore2 = parseInt(document.getElementById("MasteryCore2").value);
    let OriginCore = parseInt(document.getElementById("OriginCore").value);
    let FifthCore1 = parseInt(document.getElementById("FifthCore1").value);
    let FifthCore2 = parseInt(document.getElementById("FifthCore2").value);
    let FifthCore3 = parseInt(document.getElementById("FifthCore3").value);
    let FifthCore4 = parseInt(document.getElementById("FifthCore4").value);

    let OriginShare = 16.74; // 오리진

    let MasteryShare1_1 = 7.34; // 정뿌
    let MasteryShare1_2 = 4.23; // 산꼬마
    let MasteryShare1_3 = 4.15; // 산의 씨앗

    let MasteryShare2_1 = 11.17; // 해분출
    let MasteryShare2_2 = 9.29; // 바람분출
    let MasteryShare2_3 = 6.77; // 강분출

    let FifthShare1 = 10.85; // 해강산
    let FifthShare2 = 11.45; // 굽이굽이
    let FifthShare3 = 10.28; // 큰기지개
    let FifthShare4 = 5.54; // 용솟음

    let nowOriginShare; // 오리진

    let nowMasteryShare1_1; // 정뿌
    let nowMasteryShare1_2; // 산꼬마
    let nowMasteryShare1_3; // 산의 씨앗

    let nowMasteryShare2_1; // 해분출
    let nowMasteryShare2_2; // 바람분출
    let nowMasteryShare2_3; // 강분출

    let nowFifthShare1; // 해강산
    let nowFifthShare2; // 굽이굽이
    let nowFifthShare3; // 큰기지개
    let nowFifthShare4; // 용솟음

    // 헥사강화로 인한 오리진 감소 계산
    let nowOriginDamage = (1050 + OriginCore * 35) * 7 * 8 + (695 + OriginCore * 23) * 14 * 64; // 1~30레벨 공식
    if(OriginCore > 9) nowOriginDamage *= 1.021; // 10레벨 이상 효과
    if(OriginCore > 19) nowOriginDamage *= 1.008; // 20레벨 이상 효과
    if(OriginCore > 29) nowOriginDamage *= 1.05; // 30레벨 효과
    
    let OriginDamage = (1050 + 30 * 35) * 7 * 8 + (695 + 30 * 23) * 14 * 64; // 만렙 데미지
    OriginDamage *= 1.0806264 // 만렙 효과

    nowOriginShare = (nowOriginDamage / OriginDamage) * OriginShare;
    if(OriginCore == 0) nowOriginShare = 0;
    
    // 정뿌 감소 계산
    let nowMastery1_1Damage;

    if (MasteryCore1 == 0) { 
        nowMastery1_1Damage = 340 + 50;
    } else {
        nowMastery1_1Damage = 480 + (MasteryCore1 * 12);
    }

    let Mastery1_1Damage = 480 + 360;

    nowMasteryShare1_1 = (nowMastery1_1Damage / Mastery1_1Damage) * MasteryShare1_1;

    // 산꼬마 감소 계산
    let nowMastery1_2Damage;

    if(MasteryCore1 == 0) nowMastery1_2Damage = 410 + 16;
    nowMastery1_2Damage = 426 + 60 + (MasteryCore1 * 20);

    let Mastery1_2Damage = 426 + 60 + 600;

    nowMasteryShare1_2 = (nowMastery1_2Damage / Mastery1_2Damage) * MasteryShare1_2;
    
    // 산의 씨앗 감소 계산
    let nowMastery1_3Damage;

    if(MasteryCore1 == 0) nowMastery1_3Damage = 395 + 16;
    nowMastery1_3Damage = 409 + 60 + (MasteryCore1 * 20);

    let Mastery1_3Damage = 409 + 60 + 600;

    nowMasteryShare1_3 = (nowMastery1_3Damage / Mastery1_3Damage) * MasteryShare1_3;
    
    // 해분출 감소 계산
    let nowMastery2_1Damage;

    nowMastery2_1Damage = (760 + MasteryCore2 * 10) * 6 * 6 + (450 + MasteryCore2 * 5) * 60 + ((465 + MasteryCore2 * 7) * 3 + (465 + MasteryCore2 * 7 * 0.9) * 3 * 4) * 28;

    let Mastery2_1Damage = (760 + 300) * 6 * 6 + (450 + 150) * 60 + ((465 + 210) * 3 + (465 + 30 * 7 * 0.9) * 3 * 4) * 28;

    nowMasteryShare2_1 = (nowMastery2_1Damage / Mastery2_1Damage) * MasteryShare2_1;

    // 바람분출 감소 계산
    let nowMastery2_2Damage;

    nowMastery2_2Damage = (510 + MasteryCore2 * 6);

    let Mastery2_2Damage = (510 + 30 * 6);

    nowMasteryShare2_2 = (nowMastery2_2Damage / Mastery2_2Damage) * MasteryShare2_2;

    // 강분출 감소 계산
    let nowMastery2_3Damage;

    nowMastery2_3Damage = (930 + MasteryCore2 * 13) * 8 * 8 + (780 + MasteryCore2 * 11) * 5 * 20;

    let Mastery2_3Damage = (930 + 30 * 13) * 8 * 8 + (780 + 30 * 11) * 5 * 20;

    nowMasteryShare2_3 = (nowMastery2_3Damage / Mastery2_3Damage) * MasteryShare2_3;

    // 해강산 감소 계산
    let nowFifth1Damage;
    if(FifthCore1 == 0) nowFifth1Damage = 1;
    else if(FifthCore1 < 10) nowFifth1Damage = (110+FifthCore1)/100; // 1~9레벨
    else if(FifthCore1 < 20) nowFifth1Damage = (115+FifthCore1)/100; // 10~19레벨
    else if(FifthCore1 < 30) nowFifth1Damage = (120+FifthCore1)/100; // 20~29레벨
    else nowFifth1Damage = 1.6;
    nowFifthShare1 = (nowFifth1Damage/1.6) * FifthShare1

    // 굽이굽이 감소 계산
    let nowFifth2Damage;
    if(FifthCore2 == 0) nowFifth2Damage = 1;
    else if(FifthCore2 < 10) nowFifth2Damage = (110+FifthCore2)/100; // 1~9레벨
    else if(FifthCore2 < 20) nowFifth2Damage = (115+FifthCore2)/100; // 10~19레벨
    else if(FifthCore2 < 30) nowFifth2Damage = (120+FifthCore2)/100; // 20~29레벨
    else nowFifth2Damage = 1.6;
    nowFifthShare2 = (nowFifth2Damage/1.6) * FifthShare2

    // 큰기지개 감소 계산
    let nowFifth3Damage;
    if(FifthCore3 == 0) nowFifth3Damage = 1;
    else if(FifthCore3 < 10) nowFifth3Damage = (110+FifthCore3)/100; // 1~9레벨
    else if(FifthCore3 < 20) nowFifth3Damage = (115+FifthCore3)/100; // 10~19레벨
    else if(FifthCore3 < 30) nowFifth3Damage = (120+FifthCore3)/100; // 20~29레벨
    else nowFifth3Damage = 1.6;
    nowFifthShare3 = (nowFifth3Damage/1.6) * FifthShare3

    // 용솟음 감소 계산
    let nowFifth4Damage;
    if(FifthCore4 == 0) nowFifth4Damage = 1;
    else if(FifthCore4 < 10) nowFifth4Damage = (110+FifthCore4)/100; // 1~9레벨
    else if(FifthCore4 < 20) nowFifth4Damage = (115+FifthCore4)/100; // 10~19레벨
    else if(FifthCore4 < 30) nowFifth4Damage = (120+FifthCore4)/100; // 20~29레벨
    else nowFifth4Damage = 1.6;
    nowFifthShare4 = (nowFifth4Damage/1.6) * FifthShare4

    // 헥사 풀일때 데미지
    let HexaFullDamage = 
    OriginShare +
    MasteryShare1_1 +
    MasteryShare1_2 +
    MasteryShare1_3 +
    MasteryShare2_1 +
    MasteryShare2_2 +
    MasteryShare2_3 +
    FifthShare1 +
    FifthShare2 +
    FifthShare3 +
    FifthShare4;

    // 현재 나오는 데미지
    let HexaNowDamage = 
    nowOriginShare +
    nowMasteryShare1_1 +
    nowMasteryShare1_2 +
    nowMasteryShare1_3 +
    nowMasteryShare2_1 +
    nowMasteryShare2_2 +
    nowMasteryShare2_3 +
    nowFifthShare1 +
    nowFifthShare2 +
    nowFifthShare3 +
    nowFifthShare4;

    return HexaNowDamage / HexaFullDamage;
}

function calculate() {
    var HexaLevel = HexaCalculate()
    var hexa = document.getElementById("hexa").value;
    var hexaDamage = 0.000422346 * HexaLevel;
    var damage = parseInt(hexa) * hexaDamage;
    var score = 0;

    if (damage >= 13671) {
        score = 1600;
        if (damage < 153671) {
            score += (damage - 13671) / 350;
        } else {
            score += (153671 - 13671) / 350;
            score += (damage - 153671) / 3500;
        }
    }
     // 결과 숫자에 디자인 적용
    var damageElement = document.getElementById("damage");
    var scoreElement = document.getElementById("score");
    damageElement.style.fontSize = "18px";
    damageElement.style.fontWeight = "bold";
    damageElement.style.color = "#000000";
    scoreElement.style.fontSize = "18px";
    scoreElement.style.fontWeight = "bold";
    scoreElement.style.color = "#000000";

    damage = damage / 1000;
    if ( score > 2050 ) { score = 2050; }
    damageElement.innerText = "데미지: " + damage.toFixed(1) + "조"; 
    // damageElement.innerText = "데미지: " + damage + "억";
    scoreElement.innerText = "점수: " + score.toFixed(1);
}

function calculate2() {
    var HexaLevel = HexaCalculate()
    var hexa2 = document.getElementById("hexa2").value;
    var hexaDamage2 = 0.005328 * HexaLevel;
    var damage2 = parseInt(hexa2) * hexaDamage2;
    var score2 = 0;

    if (damage2 <= 60) {
        score2 = damage2 / 6;
    }
    else if (damage2 <= 210) {
        score2 = 10 + (damage2 - 60) / 7.5;
    }
    else if (damage2 <= 1710) {
        score2 = 30 + (damage2 - 210) / 15;
    }
    else {
        score2 = 130 + (damage2 - 1710) / 30;
    }
    var score3 = score2 / 1.09

   // 결과 숫자에 디자인 적용
    var damage2Element = document.getElementById("damage2");
    var score2Element = document.getElementById("score2");
    damage2Element.style.fontSize = "18px";
    damage2Element.style.fontWeight = "bold";
    damage2Element.style.color = "#000000";
    score2Element.style.fontSize = "18px";
    score2Element.style.fontWeight = "bold";
    score2Element.style.color = "#000000";
    if ( score2 > 200000) {
          score2 = 0;
    }
    // damage2Element.innerText = "Damage: " + damage2.toFixed(0); 데미지 출력은 굳이 안해도 될듯?
    score2Element.innerText = "일반인 기준: " + score3.toFixed(0) + "\n최고점 기준: " + score2.toFixed(0);
}
</script>
</body>
</html>
